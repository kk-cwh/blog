webpackJsonp([1],{"+skl":function(t,e){},"51Ty":function(t,e){},NHnr:function(t,e,a){"use strict";function n(t){a("afiG")}function o(t){a("hV0K")}function r(t){a("51Ty")}function s(t){a("hLHE")}function i(){return window.localStorage.getItem(Ft)}function l(t){return window.localStorage.setItem(Ft,t)}function c(){return window.localStorage.removeItem(Ft)}Object.defineProperty(e,"__esModule",{value:!0});var d=a("7+uW"),u={name:"app"},m=function(){var t=this,e=t.$createElement;return(t._self._c||e)("router-view")},p=[],h={render:m,staticRenderFns:p},f=h,g=a("VU/8"),v=n,_=g(u,f,!1,v,null,null),y=_.exports,b=a("/ocq"),w={data:function(){return{spanLeft:5,spanRight:19,routes:yt,mianbaos:[]}},computed:{iconSize:function(){return 5===this.spanLeft?14:24}},methods:{toggleClick:function(){5===this.spanLeft?(this.spanLeft=2,this.spanRight=21):(this.spanLeft=5,this.spanRight=19)},selectSomeone:function(t){this.$router.push({name:t});var e=this.$router.currentRoute.matched;this.mianbaos=e},toLogout:function(t){var e=this;"logout"===t&&this.$store.dispatch("Logout").then(function(){e.$Message.success("Logout Success!"),e.$router.push({name:"Login"})}).catch(function(){e.$Message.error("logout Fail!")})}}},k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout",class:{"layout-hide-text":t.spanLeft<5}},[a("Row",{staticClass:"row-me",attrs:{type:"flex"}},[a("Col",{staticClass:"layout-menu-left",attrs:{span:t.spanLeft}},[a("Menu",{attrs:{"active-name":"1",theme:"dark",width:"auto"},on:{"on-select":t.selectSomeone}},[a("div",{staticClass:"layout-logo-left"},[a("img",{attrs:{src:"",alt:""}})]),t._v(" "),a("MenuItem",{attrs:{name:"Home"}},[a("Icon",{attrs:{type:"home"}}),t._v("\n          首页\n      ")],1),t._v(" "),t._l(t.routes,function(e,n){return a("Submenu",{key:n,attrs:{name:e.name}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:e.meta.icon,size:t.iconSize}}),t._v(" "),t.spanLeft>=4?a("span",[t._v(t._s(e.meta.name))]):t._e()],1),t._v(" "),e.children&&e.children.length>0?t._l(e.children,function(e,n){return a("MenuItem",{key:n,attrs:{name:e.name}},[t._v(t._s(e.meta.name))])}):t._e()],2)})],2)],1),t._v(" "),a("Col",{attrs:{span:t.spanRight}},[a("div",{staticClass:"layout-header"},[a("Button",{attrs:{type:"text"},on:{click:t.toggleClick}},[a("Icon",{attrs:{type:"navicon",size:"32"}})],1),t._v(" "),a("Dropdown",{staticClass:"drop-down",on:{"on-click":t.toLogout}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n          "+t._s(this.$store.state.name)+"\n          "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"userinfo"}},[t._v("个人信息")]),t._v(" "),a("DropdownItem",{attrs:{name:"logout"}},[t._v("退出登录")])],1)],1)],1),t._v(" "),a("div",{staticClass:"layout-breadcrumb"},[t.mianbaos&&t.mianbaos.length>0?a("Breadcrumb",t._l(t.mianbaos,function(e,n){return a("BreadcrumbItem",{key:n,attrs:{to:e.path}},[t._v(t._s(e.meta.name))])})):t._e()],1),t._v(" "),a("div",{staticClass:"layout-content"},[a("div",{staticClass:"layout-content-main"},[a("router-view")],1)]),t._v(" "),a("div",{staticClass:"layout-copy"},[t._v("\n      2011-2016 © TalkingData\n    ")])])],1)],1)},I=[],$={render:k,staticRenderFns:I},x=$,L=a("VU/8"),S=o,E=L(w,x,!1,S,"data-v-4ed722de",null),V=E.exports,C={data:function(){return{formInline:{username:"jaak@126.com",password:"admin"},ruleInline:{username:[{required:!0,message:"Please fill in the user name",trigger:"blur"}],password:[{required:!0,message:"Please fill in the password.",trigger:"blur"},{type:"string",min:5,message:"The password length cannot be less than 5 bits",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.$store.dispatch("Login",e.formInline).then(function(){e.$store.dispatch("GetUserInfo").then(function(){e.$Message.success("Success!"),e.$router.push({name:"Home"})})}).catch(function(){e.$Message.error("Login Fail!")}):e.$Message.error("Login Fail!")})}}},T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[a("FormItem",{attrs:{prop:"username"}},[a("Input",{attrs:{type:"text",placeholder:"Username"},model:{value:t.formInline.username,callback:function(e){t.$set(t.formInline,"username",e)},expression:"formInline.username"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.formInline.password,callback:function(e){t.$set(t.formInline,"password",e)},expression:"formInline.password"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formInline")}}},[t._v("Signin")])],1)],1)},F=[],A={render:T,staticRenderFns:F},M=A,R=a("VU/8"),U=R(C,M,!1,null,null,null),P=U.exports,B=a("OS1Z"),q=(a("pw1w"),{components:{mavonEditor:B.mavonEditor},data:function(){return{title:"",mdString:"",content:"",type_id:"",types:[],tags:[],tagIds:[]}},mounted:function(){var t=this;this.$store.dispatch("TypeList").then(function(e){var a=e.data;t.types=a.types?a.types:[],t.tags=a.tags?a.tags:[]}).catch(function(e){console.log(e),t.$Message.error("error")})},methods:{AddArticle:function(){var t=this,e=this.title,a=this.content,n=this.type_id,o=this.tagIds;if(!e||!a||!n)return void this.$Message.error("param error");var r={title:e,content:a,tagIds:o,type_id:n};this.$store.dispatch("AddArticle",r).then(function(e){t.$Message.success("发布成功"),t.$router.push({name:"ArticleList"})}).catch(function(e){console.log(e),t.$Message.error("error")})},getChang:function(t,e){this.content=e}}}),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editor-content"},[t._m(0,!1,!1),t._v(" "),a("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"输入文章标题.."},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("Select",{staticStyle:{width:"120px"},model:{value:t.type_id,callback:function(e){t.type_id=e},expression:"type_id"}},t._l(t.types,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("CheckboxGroup",{model:{value:t.tagIds,callback:function(e){t.tagIds=e},expression:"tagIds"}},t._l(t.tags,function(e){return a("Checkbox",{key:e.id+"00",attrs:{label:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"},on:{click:t.AddArticle}},[t._v("发布文章")]),t._v(" "),a("mavon-editor",{staticStyle:{"margin-top":"30px"},attrs:{placeholder:"这里是文章内容.."},on:{change:t.getChang},model:{value:t.mdString,callback:function(e){t.mdString=e},expression:"mdString"}})],1)},z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"intro-head"},[t._v("超赞的👍\n    "),a("a",{attrs:{href:"https://github.com/hinesboy/mavonEditor",target:"_blank"}},[t._v("mavonEditor")])])}],O={render:N,staticRenderFns:z},D=O,K=a("VU/8"),G=r,H=K(q,D,!1,G,"data-v-6a509601",null),j=H.exports,Y={data:function(){var t=this;return{loading:!1,total:0,columns:[{title:"编号",key:"id"},{title:"文章标题",key:"title"},{title:"类别",key:"type"},{title:"是否显示",key:"is_show"},{title:"创建时间",key:"created_at"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(a.index)}}},"查看"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index)}}},"Delete")])}}],data:[]}},mounted:function(){this.toLoading()},methods:{show:function(t){this.$Modal.info({title:"User Info",content:"Name："+this.data[t].title+"<br>Age："+this.data[t].content+"<br>Address："+this.data[t].type})},remove:function(t){this.data.splice(t,1)},changPage:function(t){var e=this,a={page:t};this.$store.dispatch("ArticleList",a).then(function(t){e.loading=!1;var a=t.data.articles;e.total=a.total;for(var n=[],o=0;o<a.list.length;o++)n[o]={id:a.list[o].id,title:a.list[o].title,type:a.list[o].type.name,is_show:a.list[o].is_show?"是":"否",created_at:a.list[o].created_at};e.data=n})},toLoading:function(){var t=this;this.loading=!0;var e={page:1};this.$store.dispatch("ArticleList",e).then(function(e){t.loading=!1;for(var a=e.data.articles,n=[],o=0;o<a.list.length;o++)n[o]={id:a.list[o].id,title:a.list[o].title,type:a.list[o].type.name,is_show:a.list[o].is_show?"是":"否",created_at:a.list[o].created_at};t.data=n,t.total=a.total})}}},W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.toLoading}},[t.loading?a("span",[t._v("Loading...")]):a("span",[t._v("查询")])]),t._v(" "),a("br"),a("br"),t._v(" "),a("Table",{attrs:{border:"",columns:t.columns,data:t.data}}),t._v(" "),a("Page",{staticClass:"page",attrs:{total:t.total,"show-total":""},on:{"on-change":t.changPage}})],1)},J=[],Q={render:W,staticRenderFns:J},Z=Q,X=a("VU/8"),tt=X(Y,Z,!1,null,null,null),et=tt.exports,at={data:function(){var t=this;return{loading:!1,total:0,columns:[{title:"姓名",key:"name",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.row.name)])}},{title:"邮箱",key:"email"},{title:"是否管理员",key:"is_admin"},{title:"个人简介",key:"desc"},{title:"添加时间",key:"created_at"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(a.index)}}},"查看"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index)}}},"删除")])}}],data:[]}},mounted:function(){this.toLoading()},methods:{show:function(t){this.$Modal.info({title:"用户信息",content:"Name："+this.data[t].name+"<br>Email："+this.data[t].email+"<br>Date："+this.data[t].date})},remove:function(t){this.data.splice(t,1)},changPage:function(t){var e=this,a={page:t};this.$store.dispatch("UserList",a).then(function(t){e.loading=!1;var a=t.data.users;e.data=a.list,e.total=a.total})},toLoading:function(){var t=this;this.loading=!0;var e={page:1};this.$store.dispatch("UserList",e).then(function(e){t.loading=!1;var a=e.data.users;t.data=a.list,t.total=a.total})}}},nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.toLoading}},[t.loading?a("span",[t._v("Loading...")]):a("span",[t._v("查询")])]),t._v(" "),a("br"),a("br"),t._v(" "),a("Table",{attrs:{border:"",columns:t.columns,data:t.data}}),t._v(" "),a("Page",{staticClass:"page",attrs:{total:t.total,"show-total":""},on:{"on-change":t.changPage}})],1)},ot=[],rt={render:nt,staticRenderFns:ot},st=rt,it=a("VU/8"),lt=s,ct=it(at,st,!1,lt,"data-v-639e7330",null),dt=ct.exports,ut={data:function(){return{formValidate:{name:"",password:"",email:"",city:"",gender:"",interest:[],date:"",desc:""},ruleValidate:{email:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],password:[{required:!0,message:"password cannot be empty",trigger:"blur"}],name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],gender:[{required:!0,message:"Please select gender",trigger:"change"}],interest:[{required:!0,type:"array",min:1,message:"Choose at least one hobby",trigger:"change"},{type:"array",max:2,message:"Choose two hobbies at best",trigger:"change"}],date:[{required:!0,type:"date",message:"Please select the birthday ",trigger:"change"}],desc:[{required:!1,message:"Please enter a personal introduction",trigger:"blur"},{type:"string",min:5,message:"Introduce no less than 5 words",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.$store.dispatch("AddUser",e.formValidate).then(function(t){t.data&&(e.$Message.success("Success!"),e.formValidate={name:"",password:"",email:"",city:"",gender:"",interest:[],date:"",desc:""},e.$router.push({name:"UserList"}))}):e.$Message.error("Fail!")})},handleReset:function(t){this.$refs[t].resetFields()}}},mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formValidate",staticStyle:{width:"400px"},attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,"email",e)},expression:"formValidate.email"}})],1),t._v(" "),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}})],1),t._v(" "),a("FormItem",{attrs:{label:"姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"生日"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"Select date"},model:{value:t.formValidate.date,callback:function(e){t.$set(t.formValidate,"date",e)},expression:"formValidate.date"}})],1)],1)],1)],1),t._v(" "),a("FormItem",{attrs:{label:"性别",prop:"gender"}},[a("RadioGroup",{model:{value:t.formValidate.gender,callback:function(e){t.$set(t.formValidate,"gender",e)},expression:"formValidate.gender"}},[a("Radio",{attrs:{label:"male"}},[t._v("Male")]),t._v(" "),a("Radio",{attrs:{label:"female"}},[t._v("Female")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"兴趣爱好",prop:"interest"}},[a("CheckboxGroup",{model:{value:t.formValidate.interest,callback:function(e){t.$set(t.formValidate,"interest",e)},expression:"formValidate.interest"}},[a("Checkbox",{attrs:{label:"Eat"}}),t._v(" "),a("Checkbox",{attrs:{label:"Sleep"}}),t._v(" "),a("Checkbox",{attrs:{label:"Run"}}),t._v(" "),a("Checkbox",{attrs:{label:"Movie"}})],1)],1),t._v(" "),a("FormItem",{attrs:{label:"简要描述",prop:"desc"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something..."},model:{value:t.formValidate.desc,callback:function(e){t.$set(t.formValidate,"desc",e)},expression:"formValidate.desc"}})],1),t._v(" "),a("FormItem",[a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("重置")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("提交")])],1)],1)},pt=[],ht={render:mt,staticRenderFns:pt},ft=ht,gt=a("VU/8"),vt=gt(ut,ft,!1,null,null,null),_t=vt.exports;d.default.use(b.a);var yt=[{path:"/article",component:V,name:"Article",meta:{name:"文章管理",icon:"document-text"},children:[{path:"list",component:et,name:"ArticleList",meta:{name:"文章列表"}},{path:"add",component:j,name:"Markdown",meta:{name:"发布文章"}}]},{path:"/user",component:V,name:"User",meta:{name:"用户管理",icon:"person"},children:[{path:"list",component:dt,name:"UserList",meta:{name:"用户列表"}},{path:"add",component:_t,name:"UserForm",meta:{name:"添加用户"}}]}],bt={path:"/",component:P,alias:"/login",name:"Login",meta:{name:"登录"}},wt={path:"/home",component:V,name:"Home",meta:{name:"首页"}},kt=[bt,wt].concat(yt),It=new b.a({routes:kt});It.beforeEach(function(t,e,a){console.log(t),a()});var $t=It,xt=a("//Fk"),Lt=a.n(xt),St=a("NYxO"),Et=a("BTaQ"),Vt=a.n(Et),Ct=a("mtWM"),Tt=a.n(Ct),Ft="auth_token",At=Tt.a.create({timeout:5e3});At.interceptors.request.use(function(t){return i()&&(t.headers.Authorization=i()),t.headers["Content-Type"]="application/json",t},function(t){return Lt.a.reject(t)}),At.interceptors.response.use(function(t){return t},function(t){return t&&t.response&&(401===t.response.status&&Et.Message.error({content:" 401 not auth",duration:10}),404===t.response.status&&Et.Message.error({content:" 404 not found",duration:10}),500===t.response.status&&Et.Message.error({content:" 500 system error ",duration:10})),Lt.a.reject(t)});var Mt=At;d.default.use(St.a);var Rt=new St.a.Store({state:{token_type:"",access_token:"",token:"",name:"",email:""},mutations:{SET_TOKEN_TYPE:function(t,e){t.token_type=e},SET_ACCESS_TOKEN:function(t,e){t.access_token=e},SET_TOKEN:function(t,e){t.token=e,l(e)},CLEAR_STATE:function(t){t.token_type="",t.access_token="",t.token="",t.name="",t.email=""}},actions:{Login:function(t,e){var a=t.commit;return new Lt.a(function(t,n){Mt({url:"/api/login",method:"post",data:e}).then(function(e){if(e.data){var n=e.data;a("SET_TOKEN_TYPE",n.token_type),a("SET_ACCESS_TOKEN",n.access_token),a("SET_TOKEN",n.token_type+" "+n.access_token),t()}}).catch(function(t){n(t)})})},GetUserInfo:function(t){var e=this;t.commit;return new Lt.a(function(t,a){Mt({url:"/api/userinfo",method:"get"}).then(function(a){if(a.data){var n=a.data.data,o=n.user;e.state.name=o.name,e.state.email=o.email,t()}}).catch(function(t){a(t)})})},Logout:function(t){var e=this,a=t.commit;return new Lt.a(function(t,n){Mt({url:"/api/logout",method:"post"}).then(function(n){n.data&&(c(),a("CLEAR_STATE"),console.log(e.state),t())}).catch(function(t){n(t)})})},UserList:function(t,e){t.commit;return new Lt.a(function(t,a){Mt({url:"/api/users?page="+e.page,method:"get"}).then(function(e){e.data&&t(e.data)}).catch(function(t){a(t)})})},AddUser:function(t,e){t.commit;return new Lt.a(function(t,a){Mt({url:"/api/users",method:"post",data:e}).then(function(e){e.data&&t(e.data)}).catch(function(t){a(t)})})},TypeList:function(t){t.commit;return new Lt.a(function(t,e){Mt({url:"/api/types",method:"get"}).then(function(e){e.data&&t(e.data)}).catch(function(t){e(t)})})},AddArticle:function(t,e){t.commit;return new Lt.a(function(t,a){Mt({url:"/api/articles",method:"post",data:e}).then(function(e){e.data&&t(e)}).catch(function(t){a(t)})})},ArticleList:function(t,e){t.commit;return new Lt.a(function(t,a){Mt({url:"/api/articles?page="+e.page,method:"get"}).then(function(e){e.data&&t(e.data)}).catch(function(t){a(t)})})}}}),Ut=Rt;a("+skl");d.default.config.productionTip=!1,d.default.use(Vt.a),new d.default({el:"#app",router:$t,store:Ut,template:"<App/>",components:{App:y}})},afiG:function(t,e){},hLHE:function(t,e){},hV0K:function(t,e){},pw1w:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map